---
title: Building a Smaller PC
description: Bigger is not better.
date: 2016-07-01
scheduled: 2016-07-01
tags:
  - another-tag
layout: layouts/post.njk
image: /assets/img/ncase2.jpg
---

This post is an insurance policy. What if my hardware melts in a fire? What if the government/aliens wipe my memory? Of course, don't forget about the [Bus Factor](https://en.wikipedia.org/wiki/Bus_factor). Needless to say, my Valheim server must keep running, the metals must be mined, and the fortress must stand. Here's how to set up a self-hosted dedicated Valheim server with docker-compose (and Discord notifications). Friends or past self, you're welcome.

## Prerequisites
- Docker
- Something that can run Docker
- Valheim (didn't see this one coming)

## Docker Image

While we could spin up    Fortunately, some individuals have done the hard part already and provided us images to consume:
- [lloesche/valheim-server-docker](https://github.com/lloesche/valheim-server-docker)
- [mbround18/valheim-docker](https://github.com/mbround18/valheim-docker)
- [sethmachine/valheim-server-docker](https://github.com/sethmachine/valheim-server-docker)

I'm a fan a lloesche's, both have similar options and either will do just fine.
Prereqs:
- Docker
- Valheim (duh)
-
docker-compose.yml
```
services:
    valheim-server:
        image: ghcr.io/lloesche/valheim-server:latest
        container_name: valheim-server
		cap_add:
		    - sys_nice
		environment:
		    PUID: 1234
		    PGID: 111
		    TZ: America/Los_Angeles
		    SERVER_NAME: ${SERVER_NAME}
            WORLD_NAME: ${WORLD_NAME}
            SERVER_PASS: ${SERVER_PASS}
		volumes:
            - ./config:/config
            - ./data:/opt/valheim
            - ./backups:/backups
		ports:
		    - 2456-2457:2456-2457/udp
        restart: unless-stopped
```
.env
```
SERVER_NAME=MyServerName
WORLD_NAME=MyWorldName
SERVER_PASS=12345
```
![Spaceballs Password](https://memegenerator.net/img/instances/80714018.jpg)

Choose a preferred names and password (>= 5 characters).

folder structure
```
valheim-server
|-   backups
|-   config
|-   data
|-   .env
|-   docker-compose.yml
```

Note I'm making use of variable substitution in the compose file, the values are populated from the .env file (which must be in the same directory).

## Discord

### Tips
- Your generated world seed is based on the World Name variable you set.
- Backup your world. You don't want to lose hundreds of hours of progress!
- A tip

### Room For Improvement
I'd like to come up with a more accessible way to start, stop, or restart the server than through scripts or command line.Discord commands would be perfect, but I'm not sure how to approach it yet.
